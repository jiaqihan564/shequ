================================================================================
               技术交流社区 - 宝塔 Nginx 部署文件包
================================================================================

📦 部署准备完成！

本目录包含以下文件，用于将前端项目部署到宝塔面板的 Nginx 中：

--------------------------------------------------------------------------------
📁 核心文件
--------------------------------------------------------------------------------

1. dist/                         前端打包文件（整个目录需要上传）
   ├── index.html                入口页面
   ├── assets/                   静态资源（JS、CSS、字体等）
   │   ├── js/                   JavaScript 文件
   │   ├── css/                  样式文件
   │   └── ttf/                  字体文件
   ├── service-worker.js         Service Worker（PWA 支持）
   └── vite.svg                  网站图标

2. nginx.conf                    Nginx 配置文件
   - 已配置后端端口为 3001
   - 已配置 gzip 压缩
   - 已配置静态资源缓存
   - 已配置 WebSocket 支持
   - 已配置 Vue Router history 模式

--------------------------------------------------------------------------------
📖 文档文件
--------------------------------------------------------------------------------

3. 快速部署.md                  快速部署指南（推荐先看这个）
   - 简洁的部署步骤
   - 5 分钟快速上手

4. 宝塔部署指南.md              详细部署文档
   - 完整的部署流程
   - 常见问题解决
   - 性能优化建议
   - 安全配置说明

5. 后端配置说明.md              后端配置详解
   - CORS 配置修改
   - 数据库配置
   - MinIO 配置
   - JWT 密钥设置
   - 安全建议

6. 部署文件说明.txt             当前文件（部署包说明）

--------------------------------------------------------------------------------
🛠️ 自动化脚本
--------------------------------------------------------------------------------

7. deploy.bat                    Windows 部署打包脚本
   - 自动打包所有文件
   - 生成压缩包
   - 一键准备部署

8. deploy.sh                     Linux/Mac 部署打包脚本
   - 自动打包所有文件
   - 生成 tar.gz 压缩包
   - 一键准备部署

--------------------------------------------------------------------------------
📋 快速开始
--------------------------------------------------------------------------------

【方法 1：使用自动打包脚本（推荐）】

Windows 用户：
  双击运行 deploy.bat

Linux/Mac 用户：
  chmod +x deploy.sh
  ./deploy.sh

脚本会自动生成一个压缩包，包含所有需要的文件。


【方法 2：手动部署】

1. 将整个 dist 目录上传到服务器：
   /www/wwwroot/shequ-tech-community/dist/

2. 在服务器上创建日志目录：
   mkdir -p /www/wwwroot/shequ-tech-community/logs

3. 在宝塔面板添加站点并配置 Nginx（详见文档）

4. 访问你的公网 IP 测试

--------------------------------------------------------------------------------
🔧 重要配置项
--------------------------------------------------------------------------------

【Nginx 配置】
- 站点根目录：/www/wwwroot/shequ-tech-community/dist
- 后端代理端口：3001（已在 nginx.conf 中配置）
- 日志目录：/www/wwwroot/shequ-tech-community/logs

【后端配置（需要修改）】
- CORS 允许来源：改为你的公网 IP
- JWT 密钥：生成强随机字符串
- 数据库密码：修改默认密码
- 管理员密码：修改默认密码

【防火墙端口】
- 80：HTTP 访问（必须开放）
- 443：HTTPS 访问（可选）
- 3001：后端服务（内网，无需开放）

--------------------------------------------------------------------------------
✅ 部署检查清单
--------------------------------------------------------------------------------

前端部署：
  □ dist 文件已上传到 /www/wwwroot/shequ-tech-community/dist/
  □ logs 目录已创建
  □ Nginx 站点已添加（域名/IP、根目录）
  □ Nginx 配置已应用（nginx.conf）
  □ Nginx 已重启/重载
  □ 防火墙 80 端口已开放

后端配置：
  □ 数据库已创建并初始化
  □ MinIO 已安装并创建 bucket
  □ config.yaml 中 CORS 已修改（公网 IP）
  □ config.yaml 中 JWT 密钥已修改
  □ config.yaml 中数据库密码已修改
  □ 后端服务正常运行（端口 3001）
  □ 管理员密码已修改

测试验证：
  □ 可以通过公网 IP 访问网站
  □ 页面显示正常（样式、图片）
  □ 可以注册/登录
  □ API 请求正常（F12 Network 查看）
  □ WebSocket 连接正常（如使用聊天功能）

--------------------------------------------------------------------------------
📞 获取帮助
--------------------------------------------------------------------------------

遇到问题？按以下顺序排查：

1. 查看【快速部署.md】中的"常见问题"部分
2. 查看【宝塔部署指南.md】中的详细故障排查
3. 检查 Nginx 错误日志：
   /www/wwwroot/shequ-tech-community/logs/error.log
4. 检查后端日志：
   /path/to/shequ_gin/log/当前日期/app.log

常见错误码：
  403 Forbidden       → 文件权限问题
  404 Not Found       → 路径配置错误或文件不存在
  502 Bad Gateway     → 后端服务未启动或端口错误
  CORS 错误           → 后端 CORS 配置问题

--------------------------------------------------------------------------------
📦 目录结构（服务器上）
--------------------------------------------------------------------------------

/www/wwwroot/shequ-tech-community/
├── dist/                          前端文件
│   ├── index.html
│   ├── assets/
│   │   ├── js/
│   │   ├── css/
│   │   └── ttf/
│   ├── service-worker.js
│   └── vite.svg
├── logs/                          日志目录
│   ├── access.log
│   └── error.log
├── nginx.conf                     Nginx 配置（参考）
├── 快速部署.md                   部署文档（参考）
├── 宝塔部署指南.md               详细文档（参考）
└── 后端配置说明.md               后端配置（参考）

--------------------------------------------------------------------------------
🔒 安全提醒
--------------------------------------------------------------------------------

生产环境部署后，务必完成：

1. ⚠️ 修改所有默认密码（数据库、MinIO、管理员）
2. ⚠️ 限制 CORS 允许的来源（不要使用 "*"）
3. ⚠️ 使用强随机 JWT 密钥
4. ⚠️ 定期备份数据库
5. ⚠️ 启用 HTTPS（如有域名）
6. ⚠️ 配置防火墙规则
7. ⚠️ 定期更新系统和软件

--------------------------------------------------------------------------------
📊 项目信息
--------------------------------------------------------------------------------

项目名称：技术交流社区
前端框架：Vue 3 + TypeScript + Vite
后端框架：Go + Gin
数据库：MySQL
对象存储：MinIO

部署方式：前端（Nginx 静态托管）+ 后端（Go 服务）
后端端口：3001
前端访问：http://公网IP

================================================================================
                          准备部署，祝你成功！🎉
================================================================================

开始部署：
1. 阅读【快速部署.md】了解基本步骤
2. 运行 deploy.bat 或 deploy.sh 打包文件
3. 上传到服务器并按文档配置
4. 访问公网 IP 测试

遇到问题？查看【宝塔部署指南.md】中的详细说明。

